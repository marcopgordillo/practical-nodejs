extends layout

block content
  h1= title
  p Welcome to 
    span.received-message #{title}
  input.message(type='text', placeholder='what is on your mind?', onkeyup='send(this)')
  script(src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.slim.js")
  script.
    var socket = io.connect('https://3000-e63fdfbd-390c-48bf-a337-9e9f620c0a65.ws-us02.gitpod.io/')
    socket.on('receive', (message) => {
      console.log('received %s', message)
      document.querySelector('.received-message').innerText = message
    })

    var send = (input) => {
      console.log(input.value)
      var value = input.value
      console.log('sending %s to server', value)
      socket.emit('messageChange', { message: value })
    }